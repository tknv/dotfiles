#!/usr/bin/env bash
# this file is called by .xinitrc to start some nice apps for dwm
feh --bg-scale $HOME/narahara.png
urxvtd -q -f -o

xrdb -load $HOME/.Xresources &

# ibus
export XMODIFIERS="@im=ibus"
export GTK_TM_MODULE="ibus"
export GT_IM_MODULE="ibus"
ibus-daemon -x -r -d &

# set battery alert level
echo '180' > $HOME/.BATTERY_LEVEL_LIM
# 180:alert start when less than 18%

# daemon applications
env - LANG="$LANG" /usr/bin/dropboxd &
conky -c $HOME/.conky | while read -r; do xsetroot -name "$REPLY"; /home/tknv/Scripts/CHECK-LOW-BATTERY; done &
/usr/share/android-notifier-desktop/run.sh &

# initialize radio devices, connect wifi AP, config trackpoint
sudo $HOME/Scripts/du-init &

# Start Thinkpad OSD daemon
#if [ -x /usr/bin/tpb ] &&  [ -w /dev/nvram ] && [ -r /dev/nvram ]; then
#	/usr/bin/tpb -d
#fi

# for (nm-applet) and etc
exec ck-launch-session dbus-launch &

# finaly start dwm
while true; do
	dwm || exit
done
